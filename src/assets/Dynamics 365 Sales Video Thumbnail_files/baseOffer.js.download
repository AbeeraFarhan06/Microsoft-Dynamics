window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.baseOffer=function(){},(n=>{var e="prototype",t="baseOffer",i={IMPRESSION:"impDisplay",EXPANDED:"impExpanded",CLOSED:"impClose",TIMEOUT:"impTimeout",CLICK:"impAccept"},a="LP_OFFERS",o="OFFER_IMPRESSION",l="OFFER_EXPANDED",s="OFFER_CLOSED",c="OFFER_TIMEOUT",r="OFFER_CLICK",g="OFFER_ERROR",d="adminArea",h=lpTag.taglets.lpUnifiedWindow,p=lpTag.taglets.rendererStub,f={UNIFIED_WINDOW:0,CUSTOM:1,LEGACY:2},u={LINK:1,BUTTON:2,SEARCH_KEYWORD:3};function m(){return this.conf.channel===this.CHANNELS.CHAT}function I(n,e){n=((n,e,t)=>(n=v(n,e),t&&(n.actionableItem={id:t.id||"",itemType:u[t.type]?t.type:"",name:t.description||"",searchWord:t.searchKeywords||""}),e.multiChannelEngagementSelection&&(n.channel=e.multiChannelEngagementSelection),n))(i.CLICK,n,e);O.call(this,n)}function C(){var n={};return m.call(this)?(n.env="",n.domain=lpTag.csds.getDomain(d),n.params="height=650,width=330,menubar=no,resizable=no",n.target=("LiveEngageChat_"+lpTag.site).replace(/[^a-z0-9]/gi,"_"),"hc1"!==n.domain&&"hc1.dev.lprnd.net"!==n.domain||(n.domain="hc1.dev.lprnd.net",n.env="qa")):(n.params="menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes",n.target=w.call(this).target),n}function E(n,e,t,i,a){var o=function(){var n=f.LEGACY;return m.call(this)&&(this.conf.windowConf=this.conf.windowConf||{},this.conf.windowConf.json=this.conf.windowConf.json||{},"external app"===this.conf.windowConf.type&&this.conf.windowConf.json.externalConfiguration?n=f.CUSTOM:h&&"function"==typeof h.clicked&&(n=f.UNIFIED_WINDOW)),n}.call(this,e);f.CUSTOM===o?function(n,e,t,i){var a=this,e={configuration:this.conf.windowConf.json.externalConfiguration,args:p.getClickObject(n,e,t),errorCallback:function(){a.errorLog("Error while opening an external channel")}};try{lpTag.taglets.lpUtil.runCallbackByObject(e.configuration,e.args,e.errorCallback),I.call(this,n,i)}catch(n){this.errorLog("Exception while opening an external channel: "+n.message)}}.call(this,n,e,t,i):f.UNIFIED_WINDOW===o?function(n,e,t,i,a){a?h.startFlow(p.getClickObject(n,e,t)):(h.clicked(p.getClickObject(n,e,t)),I.call(this,n,i))}.call(this,n,e,t,i,a):function(n,e,t,i){var a=m.call(this)?function(n,e,t){var i="https://"+t.domain+"/hcp/lewindow/index.html?lpNumber="+lpTag.site+"&site="+lpTag.site+"&domain="+t.domain;t.env&&(i+="&env="+t.env);i=lpTag.taglets.lp_monitoringSDK.appendCtx(i),i=(i=(i+="&scid="+encodeURIComponent(n.contextId))+"&cid="+encodeURIComponent(n.campaignId))+"&eid="+encodeURIComponent(n.engagementId),e.skillName&&(i+="&skill="+encodeURIComponent(e.skillName));e.windowId&&(i+="&lewid="+encodeURIComponent(e.windowId));e.language&&(i+="&lang="+encodeURIComponent(e.language));return i}.call(this,n,e,t):w.call(this).url;switch(t.target){case"_self":I.call(this,n,i),a&&setTimeout(function(){window.location.href=a},50);break;case"_parent":case"_top":I.call(this,n,i),a&&window.open(a,t.target,t.params);break;default:a&&window.open(a,t.target||"_blank",t.params),I.call(this,this.engData,i)}}.call(this,n,e,t,i)}function T(n,e){lpTag.log(n+". offer: "+this.engData.tglName+". offerId="+this.offerId,e,t)}function w(){var n={target:"",url:""},e=function(n){return(this.conf.displayInstances||[])[n]||{_isInvalid:!0}}.call(this,this.engData.state);return e._isInvalid||e.events&&e.events.click&&e.events.click.enabled&&(n.target=e.events.click.target,n.url=e.events.click.url),n}function O(n,e){lpTag.sdes&&"function"==typeof lpTag.sdes.send&&n&&(e?lpTag.sdes.push(n):lpTag.sdes.send(n),this.infoLog("Sent SMT event: "+n.type+", campaignID: "+n.campaign+", engagementId: "+n.engId))}function v(n,e){return e&&n?{type:n,campaign:e.campaignId,engId:e.engagementId,revision:e.engagementRevision,eContext:[{type:"engagementContext",id:e.contextId}]}:null}n[e].CHANNELS={CHAT:1,CONTENT:100},n[e].init=function(n,e){this.offerId=n&&n.engagementId,this.engData=n,this.conf=e},n[e].onImpression=function(){O.call(this,v(i.IMPRESSION,this.engData)),this.trigger(o)},n[e].onTimeout=function(){O.call(this,v(i.TIMEOUT,this.engData)),this.trigger(c)},n[e].onClose=function(){O.call(this,v(i.CLOSED,this.engData)),this.trigger(s)},n[e].onError=function(){this.trigger(g)},n[e].onClick=function(n){I.call(this,this.engData,n),this.trigger(r,!0)},n[e].click=function(n){this.trigger(r,!0),E.call(this,this.engData,this.conf,C.call(this),n)},n[e].startChat=function(){E.call(this,this.engData,this.conf,C.call(this),null,!0)},n[e].onExpanded=function(n){O.call(this,((n,e,t)=>{var i,a=[],n=v(n,e);if(t){if(n.expanded=t.expanded,n.userInit=!1!==t.userInit,Array.isArray(t.actionableItems))for(var o=0;o<t.actionableItems.length;o++)((i=t.actionableItems[o]).id||i.type||i.description)&&a.push({id:i.id||"",itemType:u[i.type]?i.type:"",name:i.description});n.actionableItems=a}return n})(i.EXPANDED,this.engData,n)),this.trigger(l)},n[e].trigger=function(n,e){lpTag.events.trigger({appName:a,eventName:n,data:this.engData,aSync:e||!1}),this.infoLog("Trigger event: app="+a+", name="+t)},n[e].bind=function(n,e){return lpTag.events.bind({appName:a,eventName:n,func:e,context:this})},n[e].infoLog=function(n){T.call(this,n,"INFO")},n[e].errorLog=function(n){T.call(this,n,"ERROR")},n[e].debugLog=function(n){T.call(this,n,"DEBUG")}})(lpTag.taglets.baseOffer);